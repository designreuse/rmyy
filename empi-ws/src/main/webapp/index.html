<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>JavaScript SOAP Client</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script src="js/jquery-3.1.1.min.js" type="text/javascript"></script>
	</head>

	<body>
		<table>
			<tr>
				<td>执行地址：http://localhost:8080/empi-ws/webservice/patient</td>
				<td><input type="text" id="name" name="name" /></td>
				<td><input type="button" id="execute" value="执行"/></td>
			</tr>
			<tr>
				<td colspan="3">
					<div id="ajaxBack"></div>
				</td>
			</tr>
			<tr>
				<td colspan="3">
					<input type="button" value="查看WSDL" onclick="javascript:window.open('http://localhost:8080/empi-ws/webservice');" />
				</td>
			</tr>
		</table>
		<script type="text/javascript">
			$(function(){
				$("#execute").bind('click', function(){
					var val = $("#name").val();
					if($.trim(val)==""){
						alert("请输入名称");
						return;
					}
					<!--可以通过拦截器获取请求信息-->
					var str = '<?xml version="1.0" encoding="UTF-8"?>'+
							'<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
							'<soap:Body>'+
							'<ns2:sayHello xmlns:ns2="http://ewcms.com/patient">'+
							'<name>' + val + '</name>'+
							'</ns2:sayHello>' + 
							 '</soap:Body>'+
							'</soap:Envelope>';
								  
					$.ajax({
						contentType:'application/xml;charset="UTF-8"',
						dataType:'xml',//发送数据格式
						type:'post',
						url:'http://localhost:8080/empi-ws/webservice/patient',		//直接发向这个地址
						data:str,
						success:function(data){
							var ss = $(data).find("out").first().text();
							$("#ajaxBack").html(ss).css("border","1px solid blue").css({width:'50%'}).appendTo($("body"));
							$("#name").val("");
						}
					},"xml");//数据返回格式为xml
				});
			});
		</script>
	</body>
</html>